(function(){window.cacheLocal={keyPrefix:"cacheLocal_",resourceChain:[],checkSupport:function(){try{return window.localStorage&&window.JSON||false}catch(a){return false}},setItem:function(a){try{localStorage.setItem(cacheLocal.keyPrefix+a.key,JSON.stringify(a))}catch(b){return false}},getItem:function(c){var a=localStorage.getItem(cacheLocal.keyPrefix+c);try{return JSON.parse(a||"false")}catch(b){return false}},removeItem:function(a){localStorage.removeItem(cacheLocal.keyPrefix+a)},getUrl:function(b,d){try{var c=new XMLHttpRequest();c.onreadystatechange=function(){if(c.readyState===4&&((c.status===200)||((c.status===0)&&c.responseText))){var f={key:b.key,value:c.responseText,version:b.version};typeof d==="function"&&d(f);if(b.type=="js"){cacheLocal.evalJs(c.responseText)}if(b.type=="css"){cacheLocal.evalCss(c.responseText)}var e=cacheLocal.resourceChain.shift();e&&cacheLocal.loadRes(e)}};c.open("GET",b.url+"?v="+b.version,false);c.send()}catch(a){}},isNew:function(c,a){var b=cacheLocal.getItem(c);if(b){return b.version==a}else{return false}},loadRes:function(c){if(cacheLocal.checkSupport()){if(cacheLocal.isNew(c.key,c.version)){var b=cacheLocal.getItem(c.key);if(c.type=="js"){cacheLocal.evalJs(b.value)}if(c.type=="css"){cacheLocal.evalCss(b.value)}var a=cacheLocal.resourceChain.shift();a&&cacheLocal.loadRes(a)}else{cacheLocal.removeItem(c.key);cacheLocal.getUrl(c,cacheLocal.setItem)}}else{cacheLocal.getUrl(c)}},evalJs:function(c){var b=document.head||document.getElementsByTagName("head")[0];var a=document.createElement("script");a.text=c;b.appendChild(a)},evalCss:function(a){cssNode="<style>"+a+"</style>";document.write(cssNode)}}})();